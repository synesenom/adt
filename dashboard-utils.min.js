(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("lodash"),exports)}else if(typeof define==="function"&&define.amd){define(["d3","_","exports"],e)}else{t.du=t.du||{};t.du.Widget=e(t.d3,t._)}})(this,function(t,e){"use strict";var r=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"];function a(a,i,n,l){var s;var o="du-widget-"+i+"-"+a;try{if(l){s=t.select(l).append(n).attr("id",o).attr("class","du-widget").style("display","none").style("position","absolute").style("pointer-events","none")}else{s=t.select("body").append(n).attr("id",o).attr("class","du-widget").style("display","none").style("position","absolute").style("pointer-events","none")}}catch(t){console.error("MissingDOMException: there is no DOM, could not add widget")}var c={xDim:"px",yDim:"px",fontWeight:"normal",_categories:{dim:[]},add:function(t,e,r,a,i){c[e]=r;t[e]=function(r){if(i){i(r)}else{c[e]=r}return t};if(typeof a==="string"&&c._categories.hasOwnProperty(a)){c._categories[a].push(e)}}};c.add(this,"relative",false);c.add(this,"x",0,"dim",function(t,e){c.x=t;if(typeof e==="string"&&["px","%"].indexOf(e)>-1)c.xDim=e});c.add(this,"y",0,"dim",function(t,e){c.y=t;if(typeof e==="string"&&["px","%"].indexOf(e)>-1)c.yDim=e});c.add(this,"width",200,"dim");c.add(this,"height",150,"dim");c.add(this,"margins",{left:0,right:0,top:0,bottom:0},"dim",function(t){if(typeof t==="number"){["top","left","bottom","right"].forEach(function(e){c.margins[e]=t})}else{e.forOwn(t,function(e,r){c.margins[r]=t[r]})}});c.add(this,"borders",{left:null,right:null,top:null,bottom:null},null,function(t){if(typeof t==="string"){["top","left","bottom","right"].forEach(function(e){c.borders[e]=t})}e.forOwn(t,function(e,r){c.borders[r]=t[r]})});c.add(this,"fontColor","black");c.add(this,"fontSize",10,"dim");c.add(this,"fontWeight","normal");c.add(this,"label",null);c.add(this,"xLabel",null);c.add(this,"yLabel",null);c.add(this,"tickFormat",function(e){return e>1?t.format(".2s")(e):e});c.add(this,"yTickFormat",function(e){return e>1?t.format(".2s")(e):e});c.add(this,"xTickAngle",null);c.add(this,"yMin",0);c.add(this,"mouseover",null);c.add(this,"mouseleave",null);c.add(this,"click",null);c.add(this,"colors",null);c.add(this,"tooltip",false);var u=function(){function a(t){if(typeof t!=="number"&&typeof t!=="string")return"";return(""+t).replace(/ /g,"__")}function i(r,a){if(r===null||r===undefined||r.length<1){return{x:{min:0,max:1,domain:[.5]},y:{min:0,max:1,domain:[]}}}var i=[t.min(r,function(t){return t.x}),t.max(r,function(t){return t.x})];var n={};var l=[];r.forEach(function(t){if(!n.hasOwnProperty(t.x)){n[t.x]=1;l.push(t.x)}});var s=[];if(typeof r[0].y==="number"){s=[t.min(r,function(t){return t.y}),t.max(r,function(t){return t.y})]}else{var o=[],c=[];e.forOwn(r[0].y,function(e,a){o.push(t.min(r,function(t){return t.y[a]}));c.push(t.max(r,function(t){return t.y[a]}))});s=[t.min(o),t.max(c)]}var u={x:[null,null],y:[null,null]};if(a){e.forOwn(u,function(t,e){[0,1].forEach(function(r){t[r]=a.hasOwnProperty(e)&&a[e][r]!==null?a[e][r]:t[r]})})}return{x:{min:u.x[0]!==null?u.x[0]:i[0],max:u.x[1]!==null?u.x[1]:i[1],domain:l.filter(function(t){return(!u.x[0]||t>=u.x[0])&&(!u.x[1]||t<=u.x[1])})},y:{min:u.y[0]!==null?u.y[0]:s[0],max:u.y[1]!==null?u.y[1]:s[1],domain:[]}}}function n(e,r,a,i){function n(e,r){var a=null;if(typeof e){switch(e){case"number":default:a=t.scaleLinear().domain([r.min,r.max]);break;case"time":a=t.scaleTime().domain([r.min,r.max]);break;case"string":a=t.scaleBand().domain(r.domain).padding(.1);break}}return a}return{x:n(i&&i.x?i.x.type:"number",e.x).range(i&&i.x&&i.x.reverse?[r,0]:[0,r]),y:n(i&&i.y?i.y.type:"number",e.y).range(i&&i.y&&i.y.reverse?[0,a]:[a,0])}}function l(e,r,i,n,l){if(r!==null){if(typeof n==="string"){r.g.selectAll(i).transition();r.g.selectAll(i).transition().duration(l?l:0).style("opacity",function(){return t.select(this).classed(a(n))?1:.1})}else{r.g.selectAll(i).transition();r.g.selectAll(i).transition().duration(l?l:0).style("opacity",1)}}return e}function s(e){if(e===null||e===undefined){return{}}if(e.length>0){if(c.colors===null||c.colors===undefined){return e.sort(function(t,e){return t.localeCompare(e)}).reduce(function(t,e,a){t[e]=r[a%18];return t},{})}if(typeof c.colors==="string"){var a=t.scaleLinear().domain([0,e.length]).range([c.colors,"#fff"]).interpolate(t.interpolateRgb);return e.reduce(function(t,e,r){t[e]=a(r);return t},{})}return c.colors}}return{encode:a,boundary:i,scale:n,highlight:l,colors:s}}();function d(){var e="du-widgets-plot-tooltip";var r=t.mouse(s.node());var a=t.event.pageX;var i=t.event.pageY;var n=s.node().getBoundingClientRect();if(a<n.left+c.margins.left||a>n.right-c.margins.right||i<n.top+c.margins.top||i>n.bottom-c.margins.bottom){t.select("#"+e).style("opacity",0).html("");u.tooltip();return}var l=t.select("#"+e);if(t.select("#"+e).empty()){var o=t.color(c.fontColor);o.opacity=.3;l=t.select("body").append("div").attr("id",e).style("position","absolute").style("background-color","rgba(255, 255, 255, 0.95)").style("border-radius","2px").style("border","solid 1px "+o).style("padding","5px").style("font-family","Courier").style("font-size","0.7em").style("color",c.fontColor).style("pointer-events","none").style("left",(n.left+n.right)/2+"px").style("top",(n.top+n.bottom)/2+"px")}var d=u.tooltip([r[0]-c.margins.left,r[1]-c.margins.top]);l.html("");l.append("div").style("position","relative").style("width","calc(100% - 10px)").style("line-height","11px").style("margin","5px").style("margin-bottom","10px").style("border-bottom","solid 1px "+c.fontColor).text(d.title);d.plots.sort(function(t,e){return t.id.localeCompare(e.id)}).forEach(function(t){var e=l.append("div").style("position","relative").style("max-width","150px").style("height","10px").style("margin","5px").style("padding-right","10px");e.append("div").style("position","relative").style("width","10px").style("height","10px").style("float","left").style("background-color",t.color);e.append("div").style("position","relative").style("width","calc(100% - 20px)").style("height","10px").style("float","right").style("line-height","11px").text(t.value)});var f=l.node().getBoundingClientRect();var y=f.width;var x=f.height;var p=a+20;var h=i+20;if(p<n.left+c.margins.left+10){p+=c.margins.left+10}else if(p+y>n.right-c.margins.right){p-=y+30}if(h<n.top+c.margins.top+10){h+=c.margins.top+10}else if(h+x>n.bottom-c.margins.bottom){h-=x+30}l.style("opacity",1).transition();l.transition().duration(200).ease(t.easeLinear).style("left",p+"px").style("top",h+"px")}this.id=function(){return o};this.describe=function(e){var r=null;s.on("contextmenu",function(){t.event.preventDefault();if(r===null){r=t.select("body").append("div").style("position","absolute").style("left",t.event.pageX+20+"px").style("top",t.event.pageY-20+"px").style("width","auto").style("max-width","500px").style("padding","10px").style("background","white").style("box-shadow","0 0 1px black").style("border-radius","3px").style("color","black").style("font-size","0.8em").style("line-height","1.35em").html(e)}}).on("mouseleave",function(){if(r!==null){r.remove();r=null}});return this};this.placeholder=function(e){var r=300;var i="du-widget-placeholder-"+a;if(e){s.transition().duration(r).style("opacity",0);if(t.select("#"+i).empty()){var n=l?l:"body";t.select(n).append("div").attr("id",i).style("position","absolute").style("width",c.width+"px").style("height",c.height+"px").style("line-height",c.height+"px").style(c.x>=0?"left":"right",Math.abs(c.x)+c.xDim).style(c.y>=0?"top":"bottom",Math.abs(c.y)+c.yDim).style("text-align","center").style("pointer-events","none").append("span").style("display","inline-block").style("vertical-align","middle").style("line-height","normal").style("font-weight",c.fontWeight).style("font-size",c.fontSize).style("color",c.fontColor).style("opacity",0).html(e).transition().duration(r).style("opacity",1)}}else{s.transition().duration();s.transition().duration(r).style("opacity",1);var o=t.select("#"+i);if(!o.empty()){o.remove()}}return this};var f={build:null,update:null,style:null};this.render=function(t){var e=typeof t==="number"?t:500;if(!this._isBuilt){f.build&&f.build(e);this._isBuilt=true}f.update&&f.update(e);if(c.relative){s.style("position","relative").style("top",null).style("bottom",null).style("left",null).style("right",null)}else{s.style("position","absolute").style(c.x>=0?"left":"right",Math.abs(c.x)+c.xDim).style(c.y>=0?"top":"bottom",Math.abs(c.y)+c.yDim)}s.style("width",c.width+"px").style("height",c.height+"px");s.style("pointer-events",c.tooltip&&u.tooltip?"all":null).on("mousemove",function(){c.tooltip&&u.tooltip&&d()});s.selectAll(".axis path").style("fill","none").style("stroke",c.fontColor).style("stroke-width","1px").style("shape-rendering","crispEdges");s.selectAll(".tick > line").style("stroke",c.fontColor).style("stroke-width","1px").style("shape-rendering","crispEdges");s.selectAll(".tick > text").attr("stroke-width",0).attr("font-family","inherit").style("font-size",c.fontSize+"px").style("fill",c.fontColor);s.style("font-family","inherit");s.selectAll("g").attr("font-family","inherit");f.style&&f.style();s.style("display","block");return this};this.remove=function(){s.remove()};return{widget:s,attr:c,utils:u,render:f}}return a});(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("lodash"),require("./widget"))}else if(typeof define==="function"&&define.amd){define(["d3","lodash","src/widget","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.AreaChart=e(t.d3,t._,t.du.Widget)}})(this,function(t,e,r){"use strict";function a(a,i){var n=r.call(this,a,"areachart","svg",i);n.attr.add(this,"xType","number");n.attr.add(this,"opacity",.4);var l={};var s=[];this.data=function(t,r){var a=r||1;s=t.sort(function(t,e){return t.x-e.x}).map(function(t){var r={x:t.x,y:{}};e.forOwn(t.y,function(t,e){r.y[e]=t/a});return r});return this};this.highlight=function(t,e){return n.utils.highlight(this,l,".area",t,e)};n.utils.tooltip=function(r){var a=t.bisector(function(t){return l.scale.x(t.x)}).left;var i=r?a(s,r[0]):null;if(i===null){e.forOwn(this.tt,function(t){t.remove()});this.tt=null;return}else{this.tt=this.tt||{};var o=this.tt}var c=s[i-1]?s[i-1]:s[i];var u=s[i]?s[i]:s[i-1];var d=r[0]-c.x>u.x-r[0]?u:c;var f=[];e.forOwn(d.y,function(t,e){f.push({id:e,color:n.attr.colors[e],value:t.toPrecision(6)});o[e]=o[e]||l.g.append("circle");o[e].attr("r",4).attr("cx",l.scale.x(s[i].x)+1).attr("cy",l.scale.y(s[i].y[e])+1).style("fill",n.attr.colors[e])});return{title:n.attr.xLabel+": "+d.x,plots:f}};n.render.build=function(){l.g=n.widget.append("g");l.axisFn={x:t.axisBottom().ticks(7),y:t.axisLeft().ticks(5)};l.axes={x:l.g.append("g").attr("class","x axis"),y:l.g.append("g").attr("class","y axis")};l.labels={x:l.g.append("text").attr("class","x axis-label").attr("text-anchor","end").attr("stroke-width",0),y:l.g.append("text").attr("class","y axis-label").attr("text-anchor","begin").attr("stroke-width",0)}};n.render.update=function(r){l.scale=n.utils.scale(n.utils.boundary(s),n.attr.width-n.attr.margins.left-n.attr.margins.right,n.attr.height-n.attr.margins.top-n.attr.margins.bottom,{x:{type:n.attr.xType}});l.axes.x.transition().duration(r).call(l.axisFn.x.scale(l.scale.x));l.axes.y.transition().duration(r).call(l.axisFn.y.scale(l.scale.y));if(s.length>0){if(l.areas===undefined){l.areas={};e.forOwn(s[0].y,function(t,e){l.areas[e]=l.g.append("path").attr("class","area "+n.utils.encode(e)).style("shape-rendering","geometricPrecision")})}e.forOwn(s[0].y,function(e,a){var i=t.area().x(function(t){return l.scale.x(t.x)+1}).y0(n.attr.height-n.attr.margins.top-n.attr.margins.bottom).y1(function(t){return l.scale.y(t.y[a])});l.g.select(".area."+n.utils.encode(a)).transition().duration(r).attr("d",i(s))})}};n.render.style=function(){n.attr.colors=n.utils.colors(s[0]?t.keys(s[0].y):null);var r=n.attr.width-n.attr.margins.left-n.attr.margins.right,a=n.attr.height-n.attr.margins.top-n.attr.margins.bottom;l.g.attr("width",r+"px").attr("height",a+"px").attr("transform","translate("+n.attr.margins.left+","+n.attr.margins.top+")").style("pointer-events","all");l.axes.x.attr("transform","translate(0,"+a+")");l.axisFn.y.tickFormat(n.attr.yTickFormat);l.axes.y.attr("transform","translate(0,"+1+")");l.g.selectAll(".tick > line").style("shape-rendering","geometricPrecision").style("stroke-width","1px");l.labels.x.attr("x",r+"px").attr("y",a+35+"px").attr("fill",n.attr.fontColor).style("font-size",n.attr.fontSize+"px").text(n.attr.xLabel);l.labels.y.attr("x",5+"px").attr("y",-5+"px").attr("fill",n.attr.fontColor).style("font-size",n.attr.fontSize+"px").text(n.attr.yLabel);e.forOwn(l.areas,function(t,e){l.areas[e].style("fill-opacity",n.attr.opacity).style("fill",n.attr.colors[e]).on("mouseover",function(){n.attr.mouseover&&n.attr.mouseover(e)}).on("mouseleave",function(){n.attr.mouseleave&&n.attr.mouseleave(e)}).on("click",function(){n.attr.click&&n.attr.click(e)})})}}a.prototype=Object.create(r.prototype);return a});(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("lodash"),require("./widget"))}else if(typeof define==="function"&&define.amd){define(["d3","lodash","src/widget","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.BarChart=e(t.d3,t._,t.du.Widget)}})(this,function(t,e,r){"use strict";function a(a,i){var n=r.call(this,a,"barchart","svg",i);n.attr.add(this,"vertical",false);var l={};var s=[];this.data=function(t){s=[];e.forOwn(t,function(t,e){s.push({x:e,y:t})});s.sort(function(t,e){return t.x.localeCompare(e.x)});return this};this.highlight=function(t,e){return n.utils.highlight(this,l,".bar",t,e)};n.utils.tooltip=function(e){var r=n.attr.vertical?1:0;var a=t.bisector(function(t){return l.scale.x(t.x)}).right;var i=e?a(s,e[r]):null;if(i===null){return}var o=s[i-1]?s[i-1]:s[i];var c=s[i]?s[i]:s[i-1];var u=e[r]-o.x>c.x-e[r]?c:o;return{title:n.attr.xLabel+": "+u.x,plots:[{id:u.x,color:n.attr.colors[u.x],value:u.y.toPrecision(6)}]}};n.render.build=function(){l.g=n.widget.append("g");l.axisFn={x:t.axisBottom().ticks(4),y:t.axisLeft().ticks(4)};l.axes={x:l.g.append("g").attr("class","x axis"),y:l.g.append("g").attr("class","y axis")};l.labels={x:l.g.append("text").attr("class","x axis-label").attr("text-anchor","end").attr("stroke-width",0),y:l.g.append("text").attr("class","y axis-label").attr("text-anchor","begin").attr("stroke-width",0)}};n.render.update=function(t){if(n.attr.vertical){l.scale=n.utils.scale(n.utils.boundary(s,{y:[0,null]}),n.attr.height-n.attr.margins.top-n.attr.margins.bottom,n.attr.width-n.attr.margins.left-n.attr.margins.right,{x:{type:"string"},y:{reverse:true}})}else{l.scale=n.utils.scale(n.utils.boundary(s,{y:[0,null]}),n.attr.width-n.attr.margins.left-n.attr.margins.right,n.attr.height-n.attr.margins.top-n.attr.margins.bottom,{x:{type:"string"}})}l.axes.x.transition().duration(t).call(l.axisFn.x.scale(n.attr.vertical?l.scale.y:l.scale.x));l.axes.y.transition().duration(t).call(l.axisFn.y.scale(n.attr.vertical?l.scale.x:l.scale.y));if(s.length>0){if(l.bars===undefined){l.bars=l.g.selectAll(".bar").data(s).enter().append("rect").attr("class",function(t){return"bar "+n.utils.encode(t.x)}).style("pointer-events","all").style("stroke","none").style("shape-rendering","geometricPrecision");if(n.attr.vertical){l.bars.attr("x",1).attr("width",0)}else{l.bars.attr("y",n.attr.height-n.attr.margins.top-n.attr.margins.bottom-1).attr("height",0)}}l.bars.data(s);if(n.attr.vertical){l.bars.attr("y",function(t){return l.scale.x(t.x)}).attr("height",l.scale.x.bandwidth()).transition().duration(t).attr("x",1).attr("width",function(t){return l.scale.y(t.y)})}else{l.bars.attr("x",function(t){return l.scale.x(t.x)}).attr("width",l.scale.x.bandwidth()).transition().duration(t).attr("y",function(t){return l.scale.y(t.y)}).attr("height",function(t){return n.attr.height-n.attr.margins.top-n.attr.margins.bottom-l.scale.y(t.y)})}}};n.render.style=function(){n.attr.colors=n.utils.colors(s?s.map(function(t){return t.x}):null);var t=n.attr.width-n.attr.margins.left-n.attr.margins.right,e=n.attr.height-n.attr.margins.top-n.attr.margins.bottom;l.g.style("width",t+"px").style("height",e+"px").attr("transform","translate("+n.attr.margins.left+","+n.attr.margins.top+")").style("pointer-events","all");if(n.attr.vertical){l.axisFn.x.tickFormat(n.attr.yTickFormat)}else{l.axisFn.y.tickFormat(n.attr.yTickFormat)}l.axes.x.attr("transform","translate(0,"+e+")");l.axes.y.attr("transform","translate(0,"+1+")");l.g.selectAll(".tick > text").attr("cursor","default").style("pointer-events","all");if(n.attr.vertical){l.g.selectAll(".y.axis .tick > line").style("display","none")}if(typeof n.attr.xTickAngle==="number"){l.g.selectAll(".x.axis .tick > text").attr("transform","rotate("+n.attr.xTickAngle+")").style("text-anchor","start")}l.g.selectAll(".tick > line").style("shape-rendering","geometricPrecision").style("stroke-width","1px");l.labels.x.attr("x",t+"px").attr("y",e+2.6*n.attr.fontSize+"px").style("font-size",n.attr.fontSize+"px").style("fill",n.attr.fontColor).text(n.attr.vertical?n.attr.yLabel:n.attr.xLabel);l.labels.y.attr("x",5+"px").attr("y",-5+"px").style("font-size",n.attr.fontSize+"px").style("fill",n.attr.fontColor).text(n.attr.vertical?n.attr.xLabel:n.attr.yLabel);if(l.bars!==undefined){l.bars.style("fill",function(t){return typeof n.attr.colors==="string"?n.attr.colors:n.attr.colors[t.x]});if(n.attr.mouseover){l.bars.on("mouseover",function(t){n.attr.mouseover&&n.attr.mouseover(t.x)});l.g.selectAll("."+(n.attr.vertical?"y":"x")+".axis .tick").on("mouseover",function(t,e){n.attr.mouseover&&n.attr.mouseover(s[e].x)})}if(n.attr.mouseleave){l.bars.on("mouseleave",function(t){n.attr.mouseleave&&n.attr.mouseleave(t.x)});l.g.selectAll("."+(n.attr.vertical?"y":"x")+".axis .tick").on("mouseleave",function(t,e){n.attr.mouseleave&&n.attr.mouseleave(s[e].x)})}if(n.attr.click){l.bars.on("click",function(t){n.attr.click&&n.attr.click(t.x)});l.g.selectAll("."+(n.attr.vertical?"y":"x")+".axis .tick").on("click",function(t,e){n.attr.click&&n.attr.click(s[e].x)})}}}}a.prototype=Object.create(r.prototype);return a});(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("./widget"))}else if(typeof define==="function"&&define.amd){define(["d3","src/widget","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.Histogram=e(t.d3,t.du.Widget)}})(this,function(t,e){"use strict";function r(r,a){var i=e.call(this,r,"histogram","svg",a);i.attr.add(this,"min",null);i.attr.add(this,"max",null);i.attr.add(this,"bin",null);i.attr.add(this,"normalize",false);var n={};var l=[];var s=[];this.data=function(t){l=t.sort(function(t,e){return+t-e});return this};this.highlight=function(t,e){return i.utils.highlight(this,n,".bar",t,e)};i.utils.tooltip=function(e){var r=t.bisector(function(t){return n.scale.x(t.x0)}).right;var a=e?r(s,e[0]):null;if(a===null){return}var l=s[a-1]?s[a-1]:s[a];var o=s[a]?s[a]:s[a-1];var c=e[0]-l.x>o.x-e[0]?o:l;return{title:i.attr.xLabel+": ["+c.x0.toPrecision(3)+", "+c.x1.toPrecision(3)+"]",plots:[{id:"",color:i.attr.colors[0],value:c.length.toPrecision(6)}]}};i.render.build=function(){n.g=i.widget.append("g");n.axisFn={x:t.axisBottom().ticks(4),y:t.axisLeft().ticks(4)};n.axes={x:n.g.append("g").attr("class","x axis"),y:n.g.append("g").attr("class","y axis")};n.labels={x:n.g.append("text").attr("class","x axis-label").attr("text-anchor","end").attr("stroke-width",0),y:n.g.append("text").attr("class","y axis-label").attr("text-anchor","begin").attr("stroke-width",0)}};i.render.update=function(e){if(l.length===0){return}var r=typeof i.attr.min==="number"?i.attr.min:l[0];var a=typeof i.attr.max==="number"?i.attr.max:l[l.length-1];var o=i.attr.bin;if(o===null){var c=(l.length+1)/4,u=Math.floor(c),d=Math.ceil(c),f=c-u,y=f*l[u]+(1-f)*l[d];var x=3*(l.length+1)/4,p=Math.floor(x),h=Math.ceil(x),g=x-p,m=g*l[p]+(1-g)*l[h];o=2*(m-y)/Math.pow(l.length,1/3)}var b=[];var v=Math.ceil((a-r)/o);for(var w=0;w<=v;w++){b.push(r+w*o)}var k=i.attr.normalize?l.length:1;s=t.histogram().domain([r,r+v*o]).thresholds(b)(l);var A=t.max(s,function(t){return t.length/k});n.scale=i.utils.scale({x:{min:r,max:r+v*o,domain:[r,a]},y:{min:0,max:A,domain:[0,A]}},i.attr.width-i.attr.margins.left-i.attr.margins.right,i.attr.height-i.attr.margins.top-i.attr.margins.bottom);n.axes.x.transition().duration(e).call(n.axisFn.x.scale(n.scale.x));n.axes.y.transition().duration(e).call(n.axisFn.y.scale(n.scale.y));if(l.length>0){if(n.bars===undefined){n.bars=n.g.selectAll(".bar").data(s).enter().append("rect").attr("class",function(t,e){return"bar bin-"+e}).style("pointer-events","all").style("stroke","none").style("shape-rendering","geometricPrecision");n.bars.attr("y",i.attr.height-i.attr.margins.top-i.attr.margins.bottom-1).attr("height",0)}n.bars.data(s);n.bars.attr("x",function(t){return n.scale.x(t.x0)+2}).attr("width",function(t){return Math.abs(n.scale.x(t.x1-t.x0)-2)}).transition().duration(e).attr("y",function(t){return i.attr.margins.top-i.attr.margins.top+n.scale.y(t.length/k)}).attr("height",function(t){return i.attr.height-i.attr.margins.top-i.attr.margins.bottom-n.scale.y(t.length/k)})}};i.render.style=function(){i.attr.colors=i.utils.colors([0]);var t=i.attr.width-i.attr.margins.left-i.attr.margins.right,e=i.attr.height-i.attr.margins.top-i.attr.margins.bottom;n.g.style("width",t+"px").style("height",e+"px").attr("transform","translate("+i.attr.margins.left+","+i.attr.margins.top+")").style("pointer-events","all");n.axisFn.y.tickFormat(i.attr.yTickFormat);n.axes.x.attr("transform","translate(0,"+e+")");n.axes.y.attr("transform","translate(0,"+1+")");n.g.selectAll(".tick > text").attr("cursor","default").style("pointer-events","all");if(typeof i.attr.xTickAngle==="number"){n.g.selectAll(".x.axis .tick > text").attr("transform","rotate("+i.attr.xTickAngle+")").style("text-anchor","start")}n.g.selectAll(".tick > line").style("shape-rendering","geometricPrecision").style("stroke-width","1px");n.labels.x.attr("x",t+"px").attr("y",e+2.6*i.attr.fontSize+"px").style("font-size",i.attr.fontSize+"px").style("fill",i.attr.fontColor).text(i.attr.xLabel);n.labels.y.attr("x",5+"px").attr("y",-5+"px").style("font-size",i.attr.fontSize+"px").style("fill",i.attr.fontColor).text(i.attr.yLabel);if(n.bars!==undefined){n.bars.style("fill",i.attr.colors[0]).on("mouseover",function(t,e){i.attr.mouseover&&i.attr.mouseover("bin-"+e)}).on("mouseleave",function(t,e){i.attr.mouseleave&&i.attr.mouseleave("bin-"+e)}).on("click",function(t,e){i.attr.click&&i.attr.click("bin-"+e)})}}}r.prototype=Object.create(e.prototype);return r});