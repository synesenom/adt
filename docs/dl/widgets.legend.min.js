(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("lodash"),require("./widgets"))}else if(typeof define==="function"&&define.amd){define(["d3","_","widgets","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.Legend=e(t.d3,t._,t.du.widgets.Widget,t)}})(this,function(t,e,i){"use strict";function o(t,o){var l=i.call(this,t,"legend","div",o);l.attr.add(this,"color","white");l.attr.add(this,"twoColumns",false);var n={};this.highlight=function(t,e){l.utils.highlight(n,".legend-entry",t,e)};l.render.build=function(){n.g=l.widget.append("div").style("display","block").style("position","relative");n.legends={};e.forOwn(l.attr.colors,function(t,e){var i=n.g.append("div").attr("class","legend-entry "+l.utils.encode(e)).style("display","inline-block").style("position","relative").style("width","100%").style("margin-bottom","6px").style("vertical-align","top").style("pointer-event","all");var o=i.append("div").style("display","inline-block").style("position","relative").style("float","left").style("cursor","pointer");var r=i.append("div").style("display","inline-block").style("position","relative").style("float","right").style("cursor","pointer").text(e);n.legends[e]={color:t,g:i,square:o,text:r}})};l.render.style=function(){n.g.style("width",l.attr.width+"px").style("height",l.attr.height+"px").style("pointer-events","all");e.forOwn(n.legends,function(t,e){t.g.style("width",l.attr.twoColumns?"50%":"100%");t.square.style("width",.7*l.attr.fontSize+"px").style("height",.7*l.attr.fontSize+"px").style("margin",.15*l.attr.fontSize+"px "+.15*l.attr.fontSize+"px").style("background-color",t.color).on("mouseover",function(){l.attr.mouseover&&l.attr.mouseover(e)}).on("mouseleave",function(){l.attr.mouseleave&&l.attr.mouseleave(e)}).on("click",function(){l.attr.click&&l.attr.click(e)});t.text.style("width","calc(100% - "+1.2*l.attr.fontSize+"px)").style("line-height",l.attr.fontSize+"px").on("mouseover",function(){l.attr.mouseover&&l.attr.mouseover(e)}).on("mouseleave",function(){l.attr.mouseleave&&l.attr.mouseleave(e)}).on("click",function(){l.attr.click&&l.attr.click(e)})})}}o.prototype=Object.create(i.prototype);return o});