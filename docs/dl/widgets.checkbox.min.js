(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("./widget"))}else if(typeof define==="function"&&define.amd){define(["d3","src/widget","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.Checkbox=e(t.d3,t.du.Widget)}})(this,function(o,s){"use strict";function t(t,e){var l=s.call(this,t,"legend","div",e);l.attr.add(this,"callback",null);this.check=function(t){n=t;return this};var i={};var n=null;l.render.build=function(){i.g=l.widget.append("div").style("position","absolute").style("width","100%").style("height","100%").style("display","table").style("pointer-events","all");i.container=i.g.append("div").style("display","table-cell").style("vertical-align","middle");i.label=i.container.append("label").style("display","inline-block").style("position","relative").style("cursor","pointer").style("user-select","none").style("padding-left",1.8*l.attr.fontSize+"px");i.text=i.label.append("span").text(l.attr.label);i.input=i.label.append("input").attr("type","checkbox").property("checked",false).style("position","absolute").style("opacity",0).style("width",0).style("height",0).style("cursor","pointer").on("change",function(){var t=o.select(this).property("checked");i.box.style("opacity",t?1:.1);i.checkmark.style("display",t?"block":"none");l.attr.callback&&l.attr.callback(t)});i.box=i.label.append("span").style("position","absolute").style("display","inline-block").style("top",0).style("left",0).style("width",1.2*l.attr.fontSize+"px").style("height",1.2*l.attr.fontSize+"px").style("margin-top",.5*(l.attr.height-1.4*l.attr.fontSize)+"px").style("background-color",l.attr.colors).style("opacity",.1);i.checkmark=i.box.append("span").style("position","absolute").style("display","none").style("left",.45*l.attr.fontSize+"px").style("top",.15*l.attr.fontSize+"px").style("width",.35*l.attr.fontSize+"px").style("height",.7*l.attr.fontSize+"px").style("border","solid white").style("border-width","0 "+.1*l.attr.fontSize+"px "+.1*l.attr.fontSize+"px 0").style("transform","rotate(45deg)")};l.render.update=function(){if(n!==null){i.input.property("checked",n);i.box.style("opacity",n?1:.1);i.checkmark.style("display",n?"block":"none");n=null}};l.render.style=function(){l.widget.style("font-size",l.attr.fontSize+"px");i.text.text(l.attr.label)}}t.prototype=Object.create(s.prototype);return t});