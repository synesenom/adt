(function(t,r){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=r(require("d3"),require("./widget"),exports)}else if(typeof define==="function"&&define.amd){define(["d3","src/widget","exports"],r)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.LinearGauge=r(t.d3,t.du.Widget)}})(this,function(d,c){"use strict";function t(t,r){var a=c.call(this,t,"lineargauge","svg",r);a.attr.add(this,"min",0);a.attr.add(this,"max",1);a.attr.add(this,"thickness",20);a.attr.add(this,"tick",false);a.attr.add(this,"trackColor","rgba(0, 0, 0, 0.1)");var i={};var n=null;var l=0;var e=null;var o=null;function s(e,t){i.bar.transition().duration(t).attr("width",n(e)+"px").style("fill",o(e/(a.attr.max-a.attr.min)));if(i.label){i.label.transition().duration(t).tween("progress",function(){return function(t){var r=l+(e-l)*t;return i.label.text(a.attr.tickFormat(r))}}).on("end",function(){l=e})}}this.position=function(t){e=t;return this};a.render.build=function(){n=d.scaleLinear().domain([a.attr.min,a.attr.max]).range([0,a.attr.innerWidth]).clamp(true);i.g=a.widget.append("g");o=d.interpolateHsl(a.attr.colors?a.attr.colors[0]:"#e41a1c",a.attr.colors?a.attr.colors[1]:"#4daf4a");i.container=i.g.append("rect").attr("x",0).attr("y",0);i.bar=i.g.append("rect").attr("x",0).attr("y",0).attr("width",0).style("fill",o(0));if(a.attr.tick){i.label=i.g.append("text").attr("x",-5).attr("alignment-baseline","central").attr("text-anchor","end").text(0)}};a.render.update=function(t){if(e!==null){s(e,t);e=null}};a.render.style=function(){a.widget.style("width",a.attr.width+"px");a.widget.style("height",a.attr.height+"px");o=d.interpolateHsl(a.attr.colors?a.attr.colors[0]:"#e41a1c",a.attr.colors?a.attr.colors[1]:"#4daf4a");i.g.attr("transform","translate("+a.attr.margins.left+","+(a.attr.height-a.attr.thickness)/2+")");i.container.attr("width",a.attr.innerWidth).attr("height",a.attr.thickness).style("fill",a.attr.trackColor);i.bar.attr("height",a.attr.thickness);if(i.label){i.label.attr("y",a.attr.thickness/2).attr("font-size",a.attr.fontSize)}}}t.prototype=Object.create(c.prototype);return t});