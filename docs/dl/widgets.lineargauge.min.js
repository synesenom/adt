(function(t,r){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=r(require("d3"),require("./widget"),exports)}else if(typeof define==="function"&&define.amd){define(["d3","src/widget","exports"],r)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.LinearGauge=r(t.d3,t.du.Widget)}})(this,function(d,c){"use strict";function t(t,r){var e=c.call(this,t,"lineargauge","svg",r);e.attr.add(this,"min",0);e.attr.add(this,"max",1);e.attr.add(this,"thickness",20);e.attr.add(this,"tick",false);e.attr.add(this,"trackColor","rgba(0, 0, 0, 0.1)");var i={};var n=null;var o=0;var a=null;var l=null;function s(a,t){i.bar.transition().duration(t).attr("width",n(a)+"px").style("fill",l(a/(e.attr.max-e.attr.min)));if(i.label){i.label.transition().duration(t).tween("progress",function(){return function(t){var r=o+(a-o)*t;return i.label.text(e.attr.tickFormat(r))}}).on("end",function(){o=a})}}this.position=function(t){a=t;return this};e.render.build=function(){i.g=e.widget.append("g");n=d.scaleLinear().domain([e.attr.min,e.attr.max]).range([0,e.attr.innerWidth]).clamp(true);l=d.interpolateHsl(e.attr.colors?e.attr.colors[0]:"#e41a1c",e.attr.colors?e.attr.colors[1]:"#4daf4a");i.container=i.g.append("rect").attr("x",0).attr("y",0);i.bar=i.g.append("rect").attr("x",0).attr("y",0).attr("width",0).style("fill",l(0));if(e.attr.tick){i.label=i.g.append("text").attr("x",-5).attr("alignment-baseline","central").attr("text-anchor","end").text(0)}s(e.attr.min,0)};e.render.update=function(t){n=d.scaleLinear().domain([e.attr.min,e.attr.max]).range([0,e.attr.innerWidth]).clamp(true);l=d.interpolateHsl(e.attr.colors?e.attr.colors[0]:"#e41a1c",e.attr.colors?e.attr.colors[1]:"#4daf4a");if(a!==null){s(a,t);a=null}};e.render.style=function(){e.widget.style("width",e.attr.width+"px");e.widget.style("height",e.attr.height+"px");l=d.interpolateHsl(e.attr.colors?e.attr.colors[0]:"#e41a1c",e.attr.colors?e.attr.colors[1]:"#4daf4a");i.g.attr("transform","translate("+e.attr.margins.left+","+(e.attr.height-e.attr.thickness)/2+")");i.container.attr("width",e.attr.innerWidth).attr("height",e.attr.thickness).style("fill",e.attr.trackColor);i.bar.attr("height",e.attr.thickness);if(i.label){i.label.attr("y",e.attr.thickness/2).attr("font-size",e.attr.fontSize)}}}t.prototype=Object.create(c.prototype);return t});