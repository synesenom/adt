(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("lodash"),require("./widget"))}else if(typeof define==="function"&&define.amd){define(["d3","lodash","src/widget","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.BoxPlot=e(t.d3,t._,t.du.Widget)}})(this,function(t,e,i){"use strict";function n(e,n){var a=i.call(this,e,"boxplot","svg",n);var r={};var s=[];this.data=function(e){s=[];e.forEach(function(e){var i=e.data.sort(t.ascending);var n=t.min(i),a=t.max(i),r=t.quantile(i,.25),o=t.quantile(i,.75),u=o-r;var d=[],l=[];e.data.filter(function(t){return t<r-1.5*u||t>o+1.5*u}).forEach(function(t){if(t<r-3*u||t>o+3*u){l.push(t)}else{d.push(t)}});s.push({name:e.name,min:n,max:a,median:t.median(i),q1:r,q3:o,lowerWhisker:Math.max(n,r-1.5*u),upperWhisker:Math.min(a,o+1.5*u),outliers:{mild:d,extreme:l}})});console.log(s);return this};this.highlight=function(t,e){return a.utils.highlight(this,r,".box",t,e)};a.utils.tooltip=function(t){};a.render.build=function(){r.g=a.widget.append("g");r.axisFn={x:t.axisBottom().ticks(7),y:t.axisLeft().ticks(5)};r.axes={x:r.g.append("g").attr("class","x axis"),y:r.g.append("g").attr("class","y axis")};r.labels={x:r.g.append("text").attr("class","x axis-label").attr("text-anchor","end").attr("stroke-width",0),y:r.g.append("text").attr("class","y axis-label").attr("text-anchor","begin").attr("stroke-width",0)}};a.render.update=function(t){var e={x:a.utils.scale2(s.map(function(t){return t.name})),y:a.utils.scale2(s.map(function(t){return[t.min,t.max]}).reduce(function(t,e){return t.concat(e)},[]))}};a.render.style=function(){}}n.prototype=Object.create(i.prototype);return n});