(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("./widget"),exports)}else if(typeof define==="function"&&define.amd){define(["d3","src/widget","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.Slider=e(t.d3,t.du.Widget)}})(this,function(t,e){"use strict";function r(r,a){var n=e.call(this,r,"slider","svg",a);n.attr.add(this,"min",0);n.attr.add(this,"max",1);n.attr.add(this,"step",0);n.attr.add(this,"callback",null);var i=null;var l={right:20,left:20};var s=false;var o=[];var d=null;n.render.build=function(){if(i!==null)return;i={};o=[n.attr.min,n.attr.max];d=t.scaleLinear().domain(o).range([0,n.attr.width-l.left-l.right]).clamp(true);if(n.attr.step){s=true;o=[];for(var e=n.attr.min;e<=n.attr.max;e+=n.attr.step){o.push(e)}d=t.scalePoint().domain(o).range([0,n.attr.width-l.left-l.right])}i.g=n.widget.append("g").attr("transform","translate("+l.left+",20)");i.track=i.g.append("line").attr("stroke-linecap","round").attr("stroke",n.attr.fontColor).attr("stroke-width","9px").attr("x1",d.range()[0]).attr("x2",d.range()[1]);i.inset=i.track.select(function(){return this.parentNode.appendChild(this.cloneNode(true))}).style("stroke","white").style("opacity",.9).style("stroke-width","8px");i.overlay=i.inset.select(function(){return this.parentNode.appendChild(this.cloneNode(true))}).attr("class","track-overlay").style("pointer-events","stroke").style("cursor","pointer").style("stroke","transparent").style("stroke-width","50px").call(t.drag().on("start drag",function(){var e=null;if(s){var r=t.event.x;e=o.reduce(function(t,e){return Math.abs(d(e)-r)<Math.abs(d(t)-r)?e:t})}else{e=d.invert(t.event.x)}i.handle.attr("cx",d(e));n.attr.callback&&n.attr.callback(e)}));i.axis=i.g.insert("g",".track-overlay").style("font-size","10px").attr("font-family","inherit").attr("transform","translate(0,"+18+")");i.ticks=i.axis.selectAll("text").data(s?o:d.ticks(5)).enter().append("text").attr("x",d).attr("text-anchor","middle").attr("font-family","inherit").text(function(t){return t});i.handle=i.g.insert("circle",".track-overlay").style("fill","white").style("stroke-width","0.5px").attr("r",8)};n.render.style=function(){n.widget.style("width",n.attr.width+"px");n.widget.style("height",50+"px");d.range([0,n.attr.width-l.left-l.right]);i.track.attr("x1",d.range()[0]).attr("x2",d.range()[1]);i.inset.attr("x1",d.range()[0]).attr("x2",d.range()[1]);i.overlay.attr("x1",d.range()[0]).attr("x2",d.range()[1]);i.ticks.attr("x",d).attr("font-size",n.attr.fontSize+"px").attr("fill",n.attr.fontColor);i.handle.style("stroke",n.attr.fontColor)}}r.prototype=Object.create(e.prototype);return r});