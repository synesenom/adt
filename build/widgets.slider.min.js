(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("./widget"),exports)}else if(typeof define==="function"&&define.amd){define(["d3","src/widget","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.Slider=e(t.d3,t.du.Widget)}})(this,function(o,d){"use strict";function t(t,e){var a=d.call(this,t,"slider","svg",e);a.attr.add(this,"min",0);a.attr.add(this,"max",1);a.attr.add(this,"step",0);a.attr.add(this,"callback",null);var n={};var r={right:20,left:20};var i=false;var s=[];var l=null;a.render.build=function(){s=[a.attr.min,a.attr.max];l=o.scaleLinear().domain(s).range([0,a.attr.width-r.left-r.right]).clamp(true);if(a.attr.step){i=true;s=[];for(var t=a.attr.min;t<=a.attr.max;t+=a.attr.step){s.push(t)}l=o.scalePoint().domain(s).range([0,a.attr.width-r.left-r.right])}n.g=a.widget.append("g").attr("transform","translate("+r.left+",20)");n.track=n.g.append("line").attr("stroke-linecap","round").attr("stroke",a.attr.fontColor).attr("stroke-width","9px").attr("x1",l.range()[0]).attr("x2",l.range()[1]);n.inset=n.track.select(function(){return this.parentNode.appendChild(this.cloneNode(true))}).style("stroke","white").style("opacity",.9).style("stroke-width","8px");n.overlay=n.inset.select(function(){return this.parentNode.appendChild(this.cloneNode(true))}).attr("class","track-overlay").style("pointer-events","stroke").style("cursor","pointer").style("stroke","transparent").style("stroke-width","50px").call(o.drag().on("start drag",function(){var t=null;if(i){var r=o.event.x;t=s.reduce(function(t,e){return Math.abs(l(e)-r)<Math.abs(l(t)-r)?e:t})}else{t=l.invert(o.event.x)}n.handle.attr("cx",l(t));a.attr.callback&&a.attr.callback(t)}));n.axis=n.g.insert("g",".track-overlay").style("font-size","10px").attr("font-family","inherit").attr("transform","translate(0,"+20+")");n.ticks=n.axis.selectAll("text").data(i?s:l.ticks(5)).enter().append("text").attr("x",l).attr("text-anchor","middle").attr("font-family","inherit").text(function(t){return t});n.handle=n.g.insert("circle",".track-overlay").style("fill","white").style("stroke-width","0.5px").attr("r",8)};a.render.style=function(){a.widget.style("width",a.attr.width+"px");a.widget.style("height",50+"px");l.range([0,a.attr.width-r.left-r.right]);n.track.attr("x1",l.range()[0]).attr("x2",l.range()[1]);n.inset.attr("x1",l.range()[0]).attr("x2",l.range()[1]);n.overlay.attr("x1",l.range()[0]).attr("x2",l.range()[1]);n.ticks.attr("x",l).attr("font-size",a.attr.fontSize+"px").attr("fill",a.attr.fontColor);n.handle.style("stroke",a.attr.fontColor)}}t.prototype=Object.create(d.prototype);return t});