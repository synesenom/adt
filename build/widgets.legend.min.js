(function(t,e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e(require("d3"),require("./widget"))}else if(typeof define==="function"&&define.amd){define(["d3","src/widget","exports"],e)}else{t.du=t.du||{};t.du.widgets=t.du.widgets||{};t.du.widgets.Legend=e(t.d3,t.du.Widget)}})(this,function(t,i){"use strict";function e(t,e){var o=i.call(this,t,"legend","div",e);o.attr.add(this,"labels",[]);o.attr.add(this,"twoColumns",false);var r={};this.highlight=function(t,e){return o.utils.highlight(this,r,".legend-entry",t,e)};o.render.build=function(){r.g=o.widget.append("div").style("display","block").style("position","relative");r.legends={};o.attr.labels.forEach(function(t){var e=r.g.append("div").attr("class","legend-entry "+o.utils.encode(t)).style("display","inline-block").style("position","relative").style("width","100%").style("margin-bottom","6px").style("vertical-align","top").style("pointer-event","all");var i=e.append("div").style("display","inline-block").style("position","relative").style("float","left");var l=e.append("div").style("display","inline-block").style("position","relative").style("float","right").style("text-align","left").text(t);r.legends[t]={g:e,square:i,text:l}})};o.render.style=function(){o.attr.colors=o.utils.colors(o.attr.labels);r.g.style("width",o.attr.width+"px").style("height",o.attr.height+"px").style("pointer-events","all");for(var t in r.legends){if(r.legends.hasOwnProperty(t)){(function(t){var e=r.legends[t];e.g.style("width",o.attr.twoColumns?"50%":"100%");e.square.style("width",.7*o.attr.fontSize+"px").style("height",.7*o.attr.fontSize+"px").style("margin",.15*o.attr.fontSize+"px "+.15*o.attr.fontSize+"px").style("background-color",o.attr.colors[t]);if(o.attr.mouseover){e.square.style("cursor","pointer").on("mouseover",function(){o.attr.mouseover(t)})}if(o.attr.mouseleave){e.square.on("mouseleave",function(){o.attr.mouseleave(t)})}if(o.attr.click){e.square.style("cursor","pointer").on("click",function(){o.attr.click(t)})}e.text.style("width","calc(100% - "+1.2*o.attr.fontSize+"px)").style("line-height",o.attr.fontSize+"px").style("cursor",o.attr.mouseover||o.attr.click?"pointer":null).style("font-size",o.attr.fontSize+"px").on("mouseover",function(){o.attr.mouseover&&o.attr.mouseover(t)}).on("mouseleave",function(){o.attr.mouseleave&&o.attr.mouseleave(t)}).on("click",function(){o.attr.click&&o.attr.click(t)})})(t)}}}}e.prototype=Object.create(i.prototype);return e});